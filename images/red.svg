<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1003px" preserveAspectRatio="none" style="width:692px;height:1003px;background:#FFFFFF;" version="1.1" viewBox="0 0 692 1003" width="692px" zoomAndPan="magnify"><defs><filter height="300%" id="flru2lsvb8ylh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="717.5703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="254.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="257" style="stroke:#A80036;stroke-width:1.0;" width="10" x="512.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="209.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="512.5" y="644.125"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="517.5" y="707.8281"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="517.5" y="781.1797"/><rect fill="#90EE90" filter="url(#flru2lsvb8ylh)" height="204.6484" style="stroke:#000000;stroke-width:2.0;" width="357" x="206.5" y="258.3672"/><rect fill="#F08080" height="109.2422" style="stroke:none;stroke-width:1.0;" width="357" x="206.5" y="353.7734"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="165.0547" style="stroke:#000000;stroke-width:2.0;" width="204" x="471.5" y="659.125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="89.6094" y2="918.2344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="259.5" x2="259.5" y1="89.6094" y2="918.2344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="517.5" x2="517.5" y1="89.6094" y2="918.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="5" y="86.5332">Пользователь</text><ellipse cx="54.5" cy="15" fill="#FEFECE" filter="url(#flru2lsvb8ylh)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M54.5,23 L54.5,50 M41.5,31 L67.5,31 M54.5,50 L41.5,65 M54.5,50 L67.5,65 " fill="none" filter="url(#flru2lsvb8ylh)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="5" y="931.7676">Пользователь</text><ellipse cx="54.5" cy="944.8438" fill="#FEFECE" filter="url(#flru2lsvb8ylh)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M54.5,952.8438 L54.5,979.8438 M41.5,960.8438 L67.5,960.8438 M54.5,979.8438 L41.5,994.8438 M54.5,979.8438 L67.5,994.8438 " fill="none" filter="url(#flru2lsvb8ylh)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#flru2lsvb8ylh)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="82" x="216.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="223.5" y="74.5332">Сравни.ру</text><rect fill="#FEFECE" filter="url(#flru2lsvb8ylh)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="82" x="216.5" y="917.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="223.5" y="938.7676">Сравни.ру</text><rect fill="#FEFECE" filter="url(#flru2lsvb8ylh)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="68" x="481.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="488.5" y="74.5332">RED API</text><rect fill="#FEFECE" filter="url(#flru2lsvb8ylh)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="68" x="481.5" y="917.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="488.5" y="938.7676">RED API</text><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="717.5703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="254.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="257" style="stroke:#A80036;stroke-width:1.0;" width="10" x="512.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="209.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="512.5" y="644.125"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="517.5" y="707.8281"/><rect fill="#FFFFFF" filter="url(#flru2lsvb8ylh)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="517.5" y="781.1797"/><rect fill="#EEEEEE" filter="url(#flru2lsvb8ylh)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="685.5" x="0" y="120.7852"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="685.5" y1="120.7852" y2="120.7852"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="685.5" y1="123.7852" y2="123.7852"/><rect fill="#EEEEEE" filter="url(#flru2lsvb8ylh)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="327" x="179.25" y="109.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="309" x="185.25" y="127.1045">Покупка кросс-сейла "Страхование квартиры"</text><polygon fill="#A80036" points="242.5,178.6641,252.5,182.6641,242.5,186.6641,246.5,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54.5" x2="248.5" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="61.5" y="161.4561">Купить ОСАГО и</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="61.5" y="177.8076">попасть на THNX Page</text><polygon fill="#A80036" points="500.5,209.0156,510.5,213.0156,500.5,217.0156,504.5,213.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="264.5" x2="506.5" y1="213.0156" y2="213.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="271.5" y="208.1592">&lt;&lt;POST /cross-selling&gt;&gt;</text><polygon fill="#A80036" points="275.5,239.3672,265.5,243.3672,275.5,247.3672,271.5,243.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="269.5" x2="511.5" y1="243.3672" y2="243.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="281.5" y="238.5107">crossOrderId</text><path d="M206.5,258.3672 L328.5,258.3672 L328.5,266.3672 L318.5,276.3672 L206.5,276.3672 L206.5,258.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="204.6484" style="stroke:#000000;stroke-width:2.0;" width="357" x="206.5" y="258.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="77" x="221.5" y="272.8623">1-й вариант</text><polygon fill="#A80036" points="500.5,295.0703,510.5,299.0703,500.5,303.0703,504.5,299.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="264.5" x2="506.5" y1="299.0703" y2="299.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="271.5" y="294.2139">&lt;&lt;GET /cross-selling&gt;&gt;</text><polygon fill="#A80036" points="275.5,341.7734,265.5,345.7734,275.5,349.7734,271.5,345.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="269.5" x2="511.5" y1="345.7734" y2="345.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="281.5" y="324.5654">paymentUrl и данные</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="281.5" y="340.917">по кросс-сейлу</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="206.5" x2="563.5" y1="354.7734" y2="354.7734"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="73" x="211.5" y="366.1924">[2-й вариант]</text><polygon fill="#A80036" points="500.5,404.3125,510.5,408.3125,500.5,412.3125,504.5,408.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="264.5" x2="506.5" y1="408.3125" y2="408.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="271.5" y="387.1045">&lt;&lt;GET /cross-selling/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="271.5" y="403.4561">{originalEntityId}/{originalEntityType}&gt;&gt;</text><polygon fill="#A80036" points="275.5,451.0156,265.5,455.0156,275.5,459.0156,271.5,455.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="269.5" x2="511.5" y1="455.0156" y2="455.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="281.5" y="433.8076">paymentUrl и данные</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="281.5" y="450.1592">по кросс-сейлу</text><polygon fill="#A80036" points="65.5,488.3672,55.5,492.3672,65.5,496.3672,61.5,492.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="253.5" y1="492.3672" y2="492.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="71.5" y="487.5107">Отобразить кросс-сейл</text><polygon fill="#A80036" points="242.5,518.7188,252.5,522.7188,242.5,526.7188,246.5,522.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54.5" x2="248.5" y1="522.7188" y2="522.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="61.5" y="517.8623">Выбрать кросс-сейл</text><polygon fill="#A80036" points="65.5,549.0703,55.5,553.0703,65.5,557.0703,61.5,553.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="253.5" y1="553.0703" y2="553.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="71.5" y="548.2139">Отобразить карточку</text><polygon fill="#A80036" points="65.5,579.4219,55.5,583.4219,65.5,587.4219,61.5,583.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="253.5" y1="583.4219" y2="583.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="71.5" y="578.5654">Загрузить платежную ссылку</text><polygon fill="#A80036" points="242.5,609.7734,252.5,613.7734,242.5,617.7734,246.5,613.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54.5" x2="248.5" y1="613.7734" y2="613.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="61.5" y="608.917">Оплатить кросс-сейл</text><polygon fill="#A80036" points="500.5,640.125,510.5,644.125,500.5,648.125,504.5,644.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="264.5" x2="506.5" y1="644.125" y2="644.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="271.5" y="639.2686">&lt;&lt;Проверить оплату&gt;&gt;</text><path d="M471.5,659.125 L620.5,659.125 L620.5,667.125 L610.5,677.125 L471.5,677.125 L471.5,659.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="165.0547" style="stroke:#000000;stroke-width:2.0;" width="204" x="471.5" y="659.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104" x="486.5" y="673.6201">На стороне RED</text><line style="stroke:#A80036;stroke-width:1.0;" x1="527.5" x2="569.5" y1="699.8281" y2="699.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="569.5" x2="569.5" y1="699.8281" y2="712.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="528.5" x2="569.5" y1="712.8281" y2="712.8281"/><polygon fill="#A80036" points="538.5,708.8281,528.5,712.8281,538.5,716.8281,534.5,712.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="534.5" y="694.9717">Проверка оплаты</text><line style="stroke:#A80036;stroke-width:1.0;" x1="527.5" x2="569.5" y1="773.1797" y2="773.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="569.5" x2="569.5" y1="773.1797" y2="786.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="528.5" x2="569.5" y1="786.1797" y2="786.1797"/><polygon fill="#A80036" points="538.5,782.1797,528.5,786.1797,538.5,790.1797,534.5,786.1797" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="534.5" y="768.3232">Загрузить THNX Page</text><polygon fill="#A80036" points="275.5,849.5313,265.5,853.5313,275.5,857.5313,271.5,853.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="269.5" x2="516.5" y1="853.5313" y2="853.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="281.5" y="848.6748">redirectUrl</text><polygon fill="#A80036" points="65.5,896.2344,55.5,900.2344,65.5,904.2344,61.5,900.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="258.5" y1="900.2344" y2="900.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="71.5" y="879.0264">Отобразить THNX Page +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="71.5" y="895.3779">отправить полис и смс</text><!--MD5=[1d3637972820ff71ab24ff99d4c49a08]
@startuml red
actor user as "Пользователь"
participant "Сравни.ру" as sravni
participant "RED API" as red
== Покупка кросс-сейла "Страхование квартиры" ==

user -> sravni: Купить ОСАГО и \nпопасть на THNX Page
activate sravni
sravni -> red: <<POST /cross-selling>>
activate red
red - -> sravni: crossOrderId
group #LightGreen 1-й вариант
    sravni -> red: <<GET /cross-selling>>
    red - -> sravni: paymentUrl и данные \nпо кросс-сейлу
else #LightCoral 2-й вариант
    sravni -> red: <<GET /cross-selling/\n{originalEntityId}/{originalEntityType}>>
    red - -> sravni: paymentUrl и данные \nпо кросс-сейлу
end
deactivate red

sravni - -> user: Отобразить кросс-сейл
user -> sravni: Выбрать кросс-сейл
sravni - -> user: Отобразить карточку
sravni - -> user: Загрузить платежную ссылку
user -> sravni: Оплатить кросс-сейл

sravni -> red: <<Проверить оплату>>
activate red

group На стороне RED
red -> red: Проверка оплаты
activate red
deactivate red
red -> red: Загрузить THNX Page
activate red
deactivate red
end

red - -> sravni: redirectUrl

deactivate red
sravni - -> user: Отобразить THNX Page + \nотправить полис и смс
deactivate sravni

@enduml

PlantUML version 1.2022.0(Tue Jan 11 19:16:42 MSK 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>